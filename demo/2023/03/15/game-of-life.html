<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Conway's Game Of Life</title><!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Conway’s Game Of Life" />
<meta name="author" content="Joel Schutz" />
<meta property="og:locale" content="pt_br" />
<meta name="description" content="Para o Game Of Life, nosso espaço será definido como um 2d array, isso equivale a uma tela ou plano cartesiano. O estado será um simples booliano, porque nesse Autômato o estado varia apenas entre dois valores. Temos assim o seguinte struct para armazenar nossos estados." />
<meta property="og:description" content="Para o Game Of Life, nosso espaço será definido como um 2d array, isso equivale a uma tela ou plano cartesiano. O estado será um simples booliano, porque nesse Autômato o estado varia apenas entre dois valores. Temos assim o seguinte struct para armazenar nossos estados." />
<link rel="canonical" href="https://github.com/devlog/demo/2023/03/15/game-of-life.html" />
<meta property="og:url" content="https://github.com/devlog/demo/2023/03/15/game-of-life.html" />
<meta property="og:site_name" content="Joel’s Dev Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-15T03:05:17+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Conway’s Game Of Life" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Joel Schutz"},"dateModified":"2023-03-15T03:05:17+00:00","datePublished":"2023-03-15T03:05:17+00:00","description":"Para o Game Of Life, nosso espaço será definido como um 2d array, isso equivale a uma tela ou plano cartesiano. O estado será um simples booliano, porque nesse Autômato o estado varia apenas entre dois valores. Temos assim o seguinte struct para armazenar nossos estados.","headline":"Conway’s Game Of Life","mainEntityOfPage":{"@type":"WebPage","@id":"https://github.com/devlog/demo/2023/03/15/game-of-life.html"},"url":"https://github.com/devlog/demo/2023/03/15/game-of-life.html"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="https://github.com/devlog/feed.xml" title="Joel's Dev Blog" /><link rel="shortcut icon" type="image/x-icon" href="/devlog/favicon.ico" />
  <link rel="stylesheet" href="/devlog/assets/css/main.css" />
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
</head><body a="dark">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/devlog/">../</a><article>
  <p class="post-meta">
    <time datetime="2023-03-15 03:05:17 +0000">Mar-15-2023</time>
  </p><p class="languages">
    
        
    pt-br
        
    
        
            
    <a href="/devlog/en/demo/2023/03/15/game-of-life.html">en</a>
            
        
    
    </p><p>
    <iframe frameborder="0" scrolling="no" src="/devlog/assets/wasm/GameOfLife/gol.html" srcdoc="
    <!DOCTYPE html>
      <script src=&quot;/devlog/assets/wasm/wasm_exec.js&quot;></script>
      <script>
      // Polyfill
      if (!WebAssembly.instantiateStreaming) {
          WebAssembly.instantiateStreaming = async (resp, importObject) => {
              const source = await (await resp).arrayBuffer();
              return await WebAssembly.instantiate(source, importObject);
          };
      }
      
      const go = new Go();
      WebAssembly.instantiateStreaming(fetch(&quot;/devlog/assets/wasm/GameOfLife/gol.v1.wasm&quot;), go.importObject).then(result => {
          go.run(result.instance);
      });
      </script>" width="100%" height="480"></iframe>
  </p><h1>Conway's Game Of Life</h1>

  <p>Para o Game Of Life, nosso <em>espaço</em> será definido como
um 2d array, isso equivale a uma tela ou plano cartesiano.
O <em>estado</em> será um simples booliano, porque nesse
Autômato o estado varia apenas entre dois valores. Temos
assim o seguinte struct para armazenar nossos estados.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">GameOfLife</span> <span class="k">struct</span> <span class="p">{</span>
 <span class="n">values</span> <span class="p">[][]</span><span class="kt">bool</span>
<span class="p">}</span>
</code></pre></div></div>

<p>O comportamento do nosso Autômato é definido nesse método Update. Nele cada elemento do nosso array é comparado aos seus vizinhos, isso determina qual o novo estado daquela célula.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="p">(</span><span class="n">gol</span> <span class="o">*</span><span class="n">GameOfLife</span><span class="p">)</span> <span class="n">Update</span><span class="p">()</span> <span class="kt">error</span> <span class="p">{</span>
 <span class="c">// Primeiro criamos uma cópia do estado original, garantindo assim que não haverá conflitos</span>
	<span class="n">m0</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([][]</span><span class="kt">bool</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">gol</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
	<span class="nb">copy</span><span class="p">(</span><span class="n">m0</span><span class="p">,</span> <span class="n">gol</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">row</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">gol</span><span class="o">.</span><span class="n">values</span> <span class="p">{</span>
		<span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">v0</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">row</span> <span class="p">{</span>
			<span class="c">// Cell names</span>
			<span class="c">// |v1|v2|v3|</span>
			<span class="c">// |v4|v0|v5|</span>
			<span class="c">// |v6|v7|v8|</span>
			<span class="k">var</span> <span class="n">alive</span> <span class="kt">uint</span>

			<span class="c">// Aqui contamos quantos vizinhos com estado verdadeiro essa célula possui</span>
			<span class="k">if</span> <span class="n">v1</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="m">1</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="m">1</span><span class="p">);</span> <span class="n">v1</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v1</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v2</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="m">1</span><span class="p">);</span> <span class="n">v2</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v2</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v3</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="m">1</span><span class="p">,</span> <span class="n">y</span><span class="o">-</span><span class="m">1</span><span class="p">);</span> <span class="n">v3</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v3</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v4</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="m">1</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span> <span class="n">v4</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v4</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v5</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="m">1</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span> <span class="n">v5</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v5</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v6</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="m">1</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="m">1</span><span class="p">);</span> <span class="n">v6</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v6</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v7</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="m">1</span><span class="p">);</span> <span class="n">v7</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v7</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="n">v8</span> <span class="o">:=</span> <span class="n">gol</span><span class="o">.</span><span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="m">1</span><span class="p">,</span> <span class="n">y</span><span class="o">+</span><span class="m">1</span><span class="p">);</span> <span class="n">v8</span> <span class="o">!=</span> <span class="no">nil</span> <span class="o">&amp;&amp;</span> <span class="o">*</span><span class="n">v8</span> <span class="p">{</span>
				<span class="n">alive</span><span class="o">++</span>
			<span class="p">}</span>

			<span class="c">// Essa é aplicação da regra em si. A definição dela é a clássico proposta por Conway.</span>
			<span class="c">// Uma célula viva morre quando possui menos de 2 vizinhos vivos</span>
			<span class="c">// Uma célula viva morre quando possui mais de 3 vizinhos vivos</span>
			<span class="c">// Uma célula morta volta a vida quando possui exatamente 3 vizinhos vivos</span>
			<span class="c">// Em todos os outros casos ela mantém seu estado original</span>
			<span class="k">if</span> <span class="n">v0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">alive</span> <span class="o">&lt;</span> <span class="m">2</span> <span class="o">||</span> <span class="n">alive</span> <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span> 
				<span class="n">m0</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="no">false</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="o">!</span><span class="n">v0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">alive</span> <span class="o">==</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">m0</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="no">true</span>
			<span class="p">}</span>

		<span class="p">}</span>
	<span class="p">}</span>
	<span class="n">gol</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">m0</span>
	<span class="k">return</span> <span class="no">nil</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Para determinar se a célula existe e qual o seu estado, existe esse método. Perceba que ele retorna um ponteiro, caso a célula não exista é retornado um ponteiro vazio(nil), do contrário é retornado o estado daquela célula.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="p">(</span><span class="n">gol</span> <span class="o">*</span><span class="n">GameOfLife</span><span class="p">)</span> <span class="n">IsAliveOrNil</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="kt">int</span><span class="p">)</span> <span class="o">*</span><span class="kt">bool</span> <span class="p">{</span>
	<span class="n">xOut</span> <span class="o">:=</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="m">0</span> <span class="o">||</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">gol</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">-</span><span class="m">1</span>
	<span class="n">yOut</span> <span class="o">:=</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="m">0</span> <span class="o">||</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">gol</span><span class="o">.</span><span class="n">values</span><span class="p">)</span><span class="o">-</span><span class="m">1</span>

	<span class="k">if</span> <span class="n">xOut</span> <span class="o">||</span> <span class="n">yOut</span> <span class="p">{</span>
		<span class="k">return</span> <span class="no">nil</span>
	<span class="p">}</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="n">gol</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<p>Espero que tenha gostado desse material e que tenha sido de ajuda, estou ainda trabalhando nesse site e nas demos para ajudar a quem tem interesse em programar coisas praticas e fora do mundinho web. Caso tenha alguma duvida ou sugestão, por favor entre em contato pelo <a href="https://github.com/joelschutz">GitHub</a> ou <a href="mailto:joelsschutz@yahoo.com.br">e-mail</a>.
<img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExNDU3M2ZhZmUxZDQ4NGM3NGY1YjJlMzFkZmNkYTA2NmFhZGExNGFiNCZjdD1n/htebeL9yH0ZI9K47Jo/giphy.gif" alt="thank you!" /></p>

</article>
      </div>
    </main><script data-goatcounter="https://joelschutz.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<noscript>
  <img src="https://joelschutz.goatcounter.com/count?p=/test-img">
</noscript>
  </body>
</html>